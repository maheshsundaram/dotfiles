[ -s "$HOME/.secrets.sh" ] && \. "$HOME/.secrets.sh"
[ -f ~/.bash_aliases ] && . ~/.bash_aliases

export PATH=$PATH:"$HOME/src/github.com/neovim/neovim/build/bin"

if [ "$(uname)" = "Linux" ]; then
  source /usr/share/bash-completion/bash_completion
  source /usr/share/bash-completion/completions/git

elif [ "$(uname)" = "Darwin" ]; then
  # brew install bash-completion
  # . /usr/local/etc/bash_completion
  [[ -r "/opt/homebrew/etc/profile.d/bash_completion.sh" ]] && . "/opt/homebrew/etc/profile.d/bash_completion.sh"

  export CLICOLOR=true
  export LSCOLORS=ExGxBxDxCxEgEdxbxgxcxd
  # export PATH=$PATH:"$HOME/Library/Python/3.7/bin"

  complete -o default -o nospace -F _git g

  # i'm conventional
  export BASH_SILENCE_DEPRECATION_WARNING=1
fi


HISTSIZE=1000
HISTFILESIZE=2000

# https://askubuntu.com/a/339925
HISTCONTROL=ignoredups:erasedups
shopt -s histappend
export PROMPT_COMMAND="history -a; history -c; history -r; $PROMPT_COMMAND"

# check the window size after each command
shopt -s checkwinsize

# shopt -s globstar

PROMPT_SYMBOL="Î»"
PS1='\n\D{%F %T} \[\e[0;34m\]\w
$(__git_ps1 "%s") $PROMPT_SYMBOL \[\e[00m\]'

export GIT_PS1_SHOWDIRTYSTATE=1
export GIT_PS1_SHOWUNTRACKEDFILES=1

set -o vi
export VISUAL=vi
export EDITOR=vi

# clone nvm-sh/nvm
export NVM_DIR="$HOME/src/github.com/nvm-sh/nvm"
[ -s "$NVM_DIR/nvm.sh" ] && \. "$NVM_DIR/nvm.sh"
[ -s "$NVM_DIR/bash_completion" ] && \. "$NVM_DIR/bash_completion"

source ~/.git-prompt.sh
source ~/.git-completion.sh
source ~/.z.sh
source ~/.find-package-json.sh
source ~/.find-project-root.sh
source ~/.clone.sh
source ~/.zz.sh
source ~/.pass.sh
source ~/.git_fzf.sh
source ~/.node-scripts.sh
source ~/.tofu.sh

if type nvim > /dev/null 2>&1; then
  alias vim='nvim'
fi

# clone junegunn/fzf
[ -f ~/.fzf.bash ] && source ~/.fzf.bash

# deno
export DENO_INSTALL="$HOME/.deno"
export PATH=$PATH:"$DENO_INSTALL/bin"

# rust
source "$HOME/.cargo/env"
export PATH=$PATH:"$HOME/.cargo/bin"

# golang
export PATH=$PATH:"/usr/local/go/bin"
export PATH=$PATH:"$HOME/go/bin"
# export GO111MODULE=on

export TERM="xterm-256color"

# yarn
export PATH="$HOME/.yarn/bin:$HOME/.config/yarn/global/node_modules/.bin:$PATH"

# local bin
export PATH="$HOME/.bin:$PATH"
export PATH=$PATH:"$HOME/.local/bin"

eval "$(fnm env --use-on-cd)"
. "$HOME/.cargo/env"

# brew
export PATH="/opt/homebrew/bin:$PATH"

# bun
export BUN_INSTALL="$HOME/.bun"
export PATH=$BUN_INSTALL/bin:$PATH

export PYENV_ROOT="$HOME/src/github.com/pyenv/pyenv"
export PATH="$PYENV_ROOT/bin:$PATH"
eval "$(pyenv init -)"
eval "$(pyenv virtualenv-init -)"
# source "$HOME/.rye/env"

# bun
export BUN_INSTALL="$HOME/.bun"
export PATH=$BUN_INSTALL/bin:$PATH
